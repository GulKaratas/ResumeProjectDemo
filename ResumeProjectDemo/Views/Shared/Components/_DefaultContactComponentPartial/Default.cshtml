<section id="contact">
	<div class="container">
		<div class="row">
			<div class="col-lg-10 mx-lg-auto">
				<div class="row mb-8">
					<div class="col-lg-8 mx-lg-auto text-center">
						<div class="section-title h2 mb-3">
							<h2 class="mb-0">Bana Yazın</h2>
							<span class="title-letter">C</span>
						</div>
						<p>Bir sorununuz olduğunda bana yazın.</p>
					</div>
				</div>
				<div class="row mb-8">
					<div class="col-md-4 mb-5 mb-md-0">
						<div class="feature-block">
							<div class="feature-icon text-primary mb-4">
								<div class="mx-auto">
									<i class="ti-mobile"></i>
								</div>
							</div>
							<p class="text-center">

								0546 456 45 23
								<br />
							</p>
						</div>
					</div>

					<div class="col-md-4 mb-5 mb-md-0">
						<div class="feature-block">
							<div class="feature-icon text-primary mb-4">
								<div class="mx-auto">
									<i class="ti-location-pin"></i>
								</div>
							</div>
							<p class="text-center">
								2719 Embassy Dr, West Palm Beach, FL 33401
								<br />
								 Amerika Birleşik Devletleri 777
							</p>
						</div>
					</div>

					<div class="col-md-4">
						<div class="feature-block">
							<div class="feature-icon text-primary mb-4">
								<div class="mx-auto">
									<i class="ti-email"></i>
								</div>
							</div>
							<p class="text-center">
								<a href="mailto:glserenkarts@gmail.com" class="text-dark">glserenkarts@gmail.com</a><br />
							</p>
						</div>
					</div>
				</div>
				<div class="contact-form">
					<form class="mb-0" id="contactForm" autocomplete="off">
						<div class="form-row">
							<div class="form-process"></div>

							<div class="col-12 col-md-6">
								<div class="form-group error-text-white">
									<input type="text" name="NameSurname" placeholder="İsminiz" class="form-control required">
								</div>
							</div>

							<div class="col-12 col-md-6">
								<div class="form-group error-text-white">
									<input type="email" name="EmailAddress" placeholder="E-posta" class="form-control required">
								</div>
							</div>

							<div class="col-12">
								<div class="form-group error-text-white">
									<input type="text" name="Subject" placeholder="Konu" class="form-control">
								</div>
							</div>

							<div class="col-12 mb-4">
								<div class="form-group error-text-white">
									<textarea name="MessageDetail" placeholder="Mesajınız" class="form-control required" rows="7"></textarea>
								</div>
							</div>

							<div class="col-12 d-none">
								<input type="text" name="cf-botcheck" value="" class="form-control" />
							</div>

							<div class="col-12 text-center">
								<button class="btn btn-primary" type="submit" id="sendBtn">Mesaj Gönder</button>
							</div>
						</div>
					</form>
					<div class="contact-form-result text-center" id="formResult"></div>
				</div>
			</div>
		</div>
	</div>
</section>

<script>
	document.getElementById('contactForm').addEventListener('submit', function(e) {
		e.preventDefault();

		const formData = {
			NameSurname: document.querySelector('[name="NameSurname"]').value,
			EmailAddress: document.querySelector('[name="EmailAddress"]').value,
			Subject: document.querySelector('[name="Subject"]').value,
			MessageDetail: document.querySelector('[name="MessageDetail"]').value
		};

		const btn = document.getElementById('sendBtn');
		const resultDiv = document.getElementById('formResult');

		btn.disabled = true;
		btn.textContent = 'Gönderiliyor...';

		fetch('/Default/SendMessage', {
			method: 'POST',
			headers: {
				'Content-Type': 'application/json'
			},
			body: JSON.stringify(formData)
		})
		.then(res => res.json())
		.then(data => {
			if (data.success) {
				resultDiv.innerHTML = '<div class="alert alert-success mt-3">' + data.message + '</div>';
				document.getElementById('contactForm').reset();
			} else {
				resultDiv.innerHTML = '<div class="alert alert-danger mt-3">' + data.message + '</div>';
			}
		})
		.catch(error => {
			console.error('Hata:', error);
			resultDiv.innerHTML = '<div class="alert alert-danger mt-3">Bir hata oluştu!</div>';
		})
		.finally(() => {
			btn.disabled = false;
			btn.textContent = 'Mesaj Gönder';

			// 5 saniye sonra mesajı kaldır
			setTimeout(() => {
				resultDiv.innerHTML = '';
			}, 5000);
		});
	});
</script>